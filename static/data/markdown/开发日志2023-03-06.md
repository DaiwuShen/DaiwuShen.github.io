![informatrixspace-informatrix-12](https://cdn.staticaly.com/gh/DaiwuShen/daiwuImageBed@main/webP/informatrixspace-informatrix-12.2jj0koti3ry8.webp)

# 开发日志2023-03-06

> author: DaiwuShen
> date: 2023-03-06
> classification: 其他 . 日志
> tag: 静态网页, 日志, Javascript

## 1 需要一点点懒惰

在前面几天的努力下，网页的大致框架基本完成。最开始在网络上查询资料时发现大多数说法是静态网页需要每一页文章都单独编写一个页面，且数据写死在页面中，为了修改一个小数据就需要**每一个相关页面都修改一遍**，这种说法听上去让人十分头疼。

但这样的重复机械劳动让我提不起兴趣来，为了解决这一问题，我开始第二种构想——**通过 python 脚本将 markdown 文本转为 html 文本，再将 html 文本嵌入模板中，得到新的文章 html 页面。**

随后发现这样的内容依旧是重复的，每一个页面中重复使用模板，虽然可以通过脚本快速修改数据，但一点没有改善修改数据的工作量，*小改都要改全体*。而且每个页面重复存储相同的内容，对空间是极大的浪费（虽然是托管在 *github*）。于是因为懒惰，我修改了一点最初的方案。

---

## 2 将重复的工作交给机器

### 2.1 数据修改

我想到了将网站数据存储在文件中，每次展示只需要==通过 js 读取固定文件==，将数据填充到特定位置即可，这只需要运用一点点 js 就能完成。有了这样的方法，我只需要修改文件内的内容，就能修改全部页面的数据。

最简单的，运用 js 在 html 文本中插入数据的方法只需要一条命令：

```javascript
document.getElementById("element-id").innerHTML="html/text string";	// 命令将html文本渲染出来，也可以直接插入普通字符串内容
document.getElementById("element-id").innerText="text string";	// 命令将修改指定元素的字符内容
```

### 2.2 新的页面生成方案

有了以上方案，我就开始寻求一种 js 动态生成页面的方法，每次用户浏览时，只需要将文章内容与模板嵌套形成新的 html ，再将 html 展示。但是这样的方案是动态网站的能力，有服务器支持。

动态网站的特点是==将数据存储在数据库==，不需要将页面存储成文件，所以通常来说动态网站的网址有很多的参数，比如[https://www.baidu.com/s?wd=%E7%99%BE%E5%BA%A6](https://www.baidu.com/s?wd=%E7%99%BE%E5%BA%A6)，“？”后面紧跟着的就是页面间传递的字段参数，服务器通过传递的参数实时生成页面。

静态网站没有服务器的加持，只能==用文件的方式存储数据==，但是静态网页同样可以传递参数！于是我有了新的页面生成方案！

### 2.3 说干就干

新的方案就是==制作一个文章页面模板==，==用户点击链接时传递文章参数==，==在文章页面加载时通过 js 获取到文章内容和信息==，==再将获取到的内容进行拼接渲染==。在这几天的测试中，已经实现了这个功能，**实测有用**。

一点简单的原理：

```javascript
window.location.href;	// 获取当前页面的 url 
window.location.search;	// 获取当前页面 url 的属性

$.ajax({					// 采用ajax获取文件
    url:"your-file-path",	// 需要获取的文件地址，远程url或服务器上的地址
    type: "get",	// get请求
    async: false,
    error: function(){...错误处理程序...}
})
```

更具体的实现方法另外总结后发出。

---

## 3 总结

这次的方案让我茅塞顿开，很多方法其实是都是通用，不用在乎网站静态与动态的差异，条件都是创造出来的。有条件要上，没有条件创造条件也要上！
